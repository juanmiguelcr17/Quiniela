@model IEnumerable<QuinielaMVC4.Models.Entities.League>

@{
    ViewBag.Title = "Quiniela | Ligas";
}
<script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
@*<script type="text/javascript">
    $(function () {
        // Document.ready -> link up remove event handler
        $(".DetailsLink").click(function () {
            // Get the id from the link
            var recordToFind = $(this).attr("data-id");
            if (recordToFind != '') {
                // Perform the ajax post
                $.get("/PoolAdministration/LeagueDetails", { "id": recordToFind },
                function (data) {
                    // Successful requests get here
                    // Update the page elements
                    if (data.ItemCount > 0) {
                        var json = context.get_data();
                        var res = Sys.Serialization.JavaScriptSerializer.deserialize(json);
                        if (res.ItemCount > 0) {
                            var html = '<table><tr><th>Nombre</th><th>Año</th><th>Inicio</th><th>Fin</th></tr>'
                            for (var i = 0, len = res.data; i < len; ++i) {
                                html += '<tr>';
                                html += '<td>' + data[3] + '</td>';
                                html += '<td>' + data[8] + '</td>';
                                html += '<td>' + data[5] + '</td>';
                                html += '<td>' + data[0] + '</td>';
                                html += '</tr>';
                            }
                            html += '</table>';
                            $html.appendTo('row-' + recordToFind);
                        }
                    }
                });
            }
        });
    });
    //function handleUpdate() {
    //    // Load and deserialize the returned JSON data
    //    var json = context.get_data();
    //    var data = Sys.Serialization.JavaScriptSerializer.deserialize(json);
    //    // Update the page elements
    //    if (data.ItemCount == 0) {
    //        $('#row-' + data.DeleteId).fadeOut('slow');
    //    } else {
    //        $('#item-count-' + data.DeleteId).text(data.ItemCount);
    //    }
    //    $('#cart-total').text(data.CartTotal);
    //    $('#update-message').text(data.Message);
    //    $('#cart-status').text('Cart (' + data.CartCount + ')');
    //}
</script>*@

<br />
@Html.ActionLink("Crear nueva", "LeagueCreate","", new { @class = "a-button" })
<br />
<br />
<table class="content">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Country)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Country)
        </td>
        <td>
            @*<a href="#" class="DetailsLink" data-id="@item.LeagueId">Detalles</a> |*@ 
            @Html.ActionLink("Editar", "LeagueEdit", new { id=item.LeagueId }) | 
            @Html.ActionLink("Temporadas", "LeagueDetails", new { id=item.LeagueId }) |
             @Html.ActionLink("Eliminar", "LeagueDelete", new { id=item.LeagueId })
        </td>
    </tr>
    <tr id="row-@item.LeagueId" visible="false"></tr>
}

</table>
